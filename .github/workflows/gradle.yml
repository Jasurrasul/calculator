name: CI   # Namnet på din workflow som visas i GitHub Actions

on:
  push:                # När körs workflown?
    branches: [ "master" ]   # Körs vid push till grenen "master"
  pull_request:        # Körs även vid pull request
    branches: [ "master" ]

jobs:
  build:               # Ett jobb heter "build"
    runs-on: ubuntu-latest   # Jobbet körs på en virtuell Linux-maskin

    steps:             # Steg som ska köras i ordning
      - name: Checkout repository
        uses: actions/checkout@v4   # Klona ditt repo till den virtuella maskinen

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'   # Välj Java-distribution
          java-version: '17'        # Sätt version
          cache: 'gradle'           # Cacha Gradle för snabbare byggen

      - name: Make Gradle wrapper executable (Linux/macOS)
        run: chmod +x ./gradlew     # Gör gradlew körbar (behövs i Linux)

      - name: Run tests
        run: ./gradlew test --no-daemon  # Kör testerna